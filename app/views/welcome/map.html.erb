<div style='width: 100%;'>
  <div id="map" style='width: 100%; height: calc(100vh - 40px);'></div>
</div>

<script>
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
      {
        "lat": "<%= @user_location&.latitude %>",
        "lng": "<%= @user_location&.longitude %>",
        "picture": {
          "url": "<%= image_url("home.png") %>",
          "width":  32,
          "height": 32
        },
        "infowindow": "hello!"
      }
    ]);
    handler.bounds.extendWith(markers);
    // handler.fitMapToBounds();
    handler.getMap().setZoom(11);
    handler.map.centerOn({ lat: 49.2357, lng: -122.964825 });
  });

</script>
