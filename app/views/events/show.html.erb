<div class="container-fluid">

	<div class="leaf_image_div col-xs-12">
		<%= image_tag("free_pics/green_leafs") %>
	  <div style="background-color:rgba(0, 51, 0, 0.7);" class="details col-xs-offset-4 col-xs-4">
			<h1 class="text_clean_up_event"> Clean Up Event </h1>
			<h4> <%= @event.planned_date %> at <%= @event.planned_time.to_time.utc.strftime("%H:%M") %> </h4>
			<h4> <%= @event.address.street_address %> </h4>
  	</div>
		<div class="three_circles hidden-xs col-sm-offset-2 col-sm-8">
			<div class="joined_circle col-xs-2">
				<h5>People Joined </h5> <%= @event.users.count %>
			</div>
      <%=form_tag event_path do %>
        <div class="join-btn col-xs-2">
					<% unless @user_event&.is_organizer %>
	          <% if @user_event.present? %>
	            <h5> <%= link_to "Change RSVP", event_user_event_path(@event, @user_event), method: :delete %> </h5>
	          <% else %>
	            <h5> <%= link_to "Join this Event", event_user_events_path(@event), method: :post %> </h5>
	          <% end %>
					<% else %>
						<h5> <%= link_to "Edit your Event", edit_event_path(@event) %> </h5>
          <% end %>
        </div>
      <% end %>
			<div class="litter_items_circle col-xs-2">
				<h5>Litter Items </h5> 24
			</div>
		</div>
	</div>

	<div class="summary">
		<h3 class="col-xs-12 col-sm-offset-2 col-sm-10"> <%= @event.title %> </h3>
		<div class="summary_left col-xs-12 col-sm-offset-2 col-sm-4">
			<h4 class="black_color"> <span style="color:#03b421">Date:</span> <%= @event.planned_date %> </h4>
			<h4 class="black_color"> <span style="color:#03b421">Time:</span> <%= @event.planned_time.to_time.utc.strftime("%H:%M") %></h4>
			<h4 class="black_color"> <span style="color:#03b421">Location:</span> <%= @event.address.street_address %> </h4>
			<br>
			<h4 class="black_color"> <span style="color:#03b421">Number of reported litter in the area:</span> 24 </h4>
			<h4 class="black_color"> <span style="color:#03b421">Number of people that have joined so far:</span> <%= @event.users.count %> </h4>
		</div>
		<div class="summary_right col-xs-12 col-sm-6">
			<h4 class="green_color"> Organizer of this event: <span style="font-weight:bold; color:black"> <%= @event.organizers.first.user.full_name %> </span> </h4>
			<h5 class="black_color"> <span style="color:#03b421">Email organizer:</span> <%= @event.organizers.first.user.email %> </h5>
			<br>
			<h4 style="margin:0px;"> Notes from the organizer:</h4>
			<p id="notes"> <%= @event.notes %> </p>
		</div>
	</div>

	<div id="carousel" class="col-xs-12 col-sm-offset-2 col-sm-4">
		<div id="myCarousel" class="carousel slide" data-ride="carousel">
			<!-- Indicators -->
			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
			</ol>

			<!-- Wrapper for slides -->
			<div class="carousel-inner" role="listbox">
				<div class="item active">
					<%= image_tag('/uploads/litter/image/238/litter10.jpg', :class => "carousel1")%>
					</div>

				<div class="item">
					<%= image_tag('/uploads/litter/image/239/litter8.jpg', :class => "carousel1")%>
				</div>

				<div class="item">
					<%= image_tag('/uploads/litter/image/244/litter19.jpg', :class => "carousel1")%>
				</div>
			</div>

			<!-- Left and right controls -->
			<a class="left carousel-control" href="#myCarousel" data-slide="prev">
				<span class="glyphicon glyphicon-chevron-left"></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="right carousel-control" href="#myCarousel" data-slide="next">
				<span class="glyphicon glyphicon-chevron-right"></span>
				<span class="sr-only">Next</span>
			</a>
		</div>
	</div>

	<div id="map" class='event-map col-xs-12 col-sm-4'></div>
		<script>
			var trash = {'lat': <%= @event.location.latitude %>, 'lng': <%= @event.location.longitude %>}; 

			handler = Gmaps.build('Google');
			handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
				marker = handler.addMarkers([
					trash
				]);
				handler.getMap().setZoom(17);
				handler.map.centerOn(trash);
			});
		</script>

</div>
